<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    断剑重铸之日，骑士归来之时。
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="鲁档信">
<meta name="description" content="Hello World !">
<meta name="keywords" content="鲁档信,ludangxin">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="http://blog.ludangxin.club/styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/css/Card/prism.min.css" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                <!--点击特效-->
                <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>
                
                        <!--CDN样式-->
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
                        <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
                        
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="http://blog.ludangxin.club">
                    断剑重铸之日，骑士归来之时。
                </a>
            </div>
            <div id="tp-weather-widget"></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/">
                        🏠首页
                    </a>
                    
                    <a class="menu-item" href="/archives">
                        📚归档
                    </a>
                    
                    <a class="menu-item" href="/tags">
                        🏷️标签
                    </a>
                    
                    <a class="menu-item" href="/posts">
                        ✍️博客
                    </a>
                    
                    <a class="menu-item" href="/post/about/">
                        👦关于
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1598170753026" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="http://blog.ludangxin.club">
                            断剑重铸之日，骑士归来之时。
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1598170753026" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            🏠首页
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            📚归档
                        </a>
                        
                        <a class="menu-item" href="/tags">
                            🏷️标签
                        </a>
                        
                        <a class="menu-item" href="/posts">
                            ✍️博客
                        </a>
                        
                        <a class="menu-item" href="/post/about/">
                            👦关于
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>



    <script>
        (function(a, h, g, f, e, d, c, b) {
            b = function() {
                d = h.createElement(g);
                c = h.getElementsByTagName(g)[0];
                d.src = e;
                d.charset = "utf-8";
                d.async = 1;
                c.parentNode.insertBefore(d, c)
            };
            a["SeniverseWeatherWidgetObject"] = f;
            a[f] || (a[f] = function() {
                (a[f].q = a[f].q || []).push(arguments)
            });
            a[f].l = +new Date();
            if (a.attachEvent) {
                a.attachEvent("onload", b)
            } else {
                a.addEventListener("load", b, false)
            }
        }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
        window.SeniverseWeatherWidget('show', {
            flavor: "slim",
            location: "WWEFQFPJZ7T8",
            geolocation: true,
            language: "auto",
            unit: "c",
            theme: "auto",
            token: "61bcc333-3305-4728-9465-6785274bb0a3",
            hover: "enabled",
            container: "tp-weather-widget"
        })
    </script>
    
            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                SpringBoot
                            </h1>
                            
                                <!--en-->
                                <div class="post-meta en">
                                    Author:
                                    <a itemprop="author" rel="author" href="/">
                                        断剑重铸之日，骑士归来之时。
                                    </a>
                                    <span class="post-time">
                                Date: <a href="#">2020-08-23</a>
                            </span>
                                    <span class="post-readtime">Reading Time:<a
                                    href="#">18.9
                                    mins</a></span>
                                    <span class="post-words">words:<a href="#">4245</a></span>
                                    
                                        <span class="post-category">
                                Category:
                                
                                <a href="http://blog.ludangxin.club/tag/LSBz4Ej4I/">springboot</a>
                                
                            </span>
                                        
                                            Views:
                                            <span data-hk-page="current"> - </span>
                                            
                                </div>
                                
                        </header>
                        
                            <img class="post-feature-image" src="http://blog.ludangxin.club/post-images/springboot.jpg" alt="">
                          
                        <div class="post-content">
                            <h1 id="spring-boot-简介">spring boot 简介</h1>
<h2 id="概述">概述</h2>
<p>Spring Boot 可以称之为 <strong>新一代 JavaEE 开发标准</strong>；随着动态语言的流行 (Ruby、Groovy、Scala、Node.js)，Java 的开发显得格外的笨重：繁多的配置、低下的开发效率、复杂的部署流程以及第三方技术集成难度大。</p>
<p>在上述环境下，Spring Boot 应运而生。它使用 “<strong>习惯优于配置</strong>” （项目中存在大量的配置，此外还内置了一个习惯性的配置，让你无需手动进行配置）的理念让你的项目快速的运行起来,即<strong>开箱即用</strong>。使用 Spring Boot 很容易创建一个独立运行（运行 Jar，内嵌 Servlet 容器）准生产级别的基于 Spring 框架的项目，使用 Spring Boot 你可以不用或者只需很少的 Spring 配置。</p>
<h2 id="spring-简史">Spring 简史</h2>
<h3 id="spring-1x-时代">Spring 1.x 时代</h3>
<p>在 Spring1.x 时代，都是通过 xml 文件配置 bean，随着项目的不断扩大，需要将 xml 配置分放到不同的配置文件中，需要频繁的在 java 类和 xml 配置文件中切换。</p>
<h3 id="spring-2x-时代">Spring 2.x 时代</h3>
<p>随着 JDK 1.5 带来的注解支持，Spring2.x 可以使用注解对 Bean 进行申明和注入，大大的减少了 xml 配置文件，同时也大大简化了项目的开发。</p>
<p>那么，问题来了，究竟是应该使用 xml 还是注解呢？</p>
<p>最佳实践：</p>
<ul>
<li>应用的基本配置用 xml，比如：数据源、资源文件等</li>
<li>业务开发用注解，比如：Service 中注入 bean 等</li>
</ul>
<h3 id="spring-3x-时代">Spring 3.x 时代</h3>
<p>从 Spring3.x 开始提供了 Java 配置方式，使用 Java 配置方式可以更好的理解你配置的 Bean，现在我们就处于这个时代，并且 Spring4.x 和 Spring boot 都推荐使用 java 配置的方式。</p>
<h3 id="spring-5x-时代">Spring 5.x 时代</h3>
<p>Spring5.x 是 Java 界首个支持响应式的 Web 框架，是 Spring 的一个重要版本，距离 Spring4.x 差不多四年。在此期间，大多数增强都是在 Spring Boot 项目中完成的，其最大的亮点就是提供了完整的端到端响应式编程的支持（新增 Spring WebFlux 模块）。</p>
<p>Spring WebFlux 同时支持使用旧的 Spring MVC 注解声明 <code>Reactive Controller</code>。和传统的 <code>MVC Controller</code> 不同，<code>Reactive Controller</code> 操作的是 <strong>非阻塞</strong> 的 <code>ServerHttpRequest</code> 和 <code>ServerHttpResponse</code>，而不再是 Spring MVC 里的 HttpServletRequest 和 HttpServletResponse。</p>
<p>至此也代表着 Java 正式迎来了响应式异步编程的时代。</p>
<h2 id="spring-boot-优缺点">Spring Boot 优缺点</h2>
<h3 id="优点">优点</h3>
<ul>
<li>快速构建项目</li>
<li>对主流开发框架的无配置集成</li>
<li>项目可独立运行，无需外部依赖 Servlet 容器</li>
<li>提供运行时的应用监控</li>
<li>极大地提高了开发、部署效率</li>
<li>与云计算的天然集成</li>
</ul>
<h3 id="缺点">缺点</h3>
<ul>
<li>版本迭代速度很快，一些模块改动很大</li>
<li>由于不用自己做配置，报错时很难定位</li>
</ul>
<h1 id="spring-boot-常用配置">spring boot 常用配置</h1>
<h2 id="概述-2">概述</h2>
<p>本章节主要介绍一下 Spring Boot 中的一些常用配置，比如：自定义 Banner、配置日志、关闭特定的自动配置等。</p>
<h2 id="自定义-banner">自定义 Banner</h2>
<p>在 Spring Boot 启动的时候会有一个默认的启动图案</p>
<pre><code> .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.1.6.RELEASE)
</code></pre>
<p>我们在 <code>src/main/resources</code> 目录下新建一个 banner.txt</p>
<p>通过 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL3BhdG9yamsuY29tL3NvZnR3YXJlL3RhYWc=">http://patorjk.com/software/taag</a> 网站生成字符串，将网站生成的字符复制到 banner.txt 中</p>
<p>再次运行这个程序</p>
<pre><code class="language-bash">${AnsiColor.BRIGHT_RED}
////////////////////////////////////////////////////////////////////
//                          _ooOoo_                               //
//                         o8888888o                              //
//                         88&quot; . &quot;88                              //
//                         (| ^_^ |)                              //
//                         O\  =  /O                              //
//                      ____/`---'\____                           //
//                    .'  \\|     |//  `.                         //
//                   /  \\|||  :  |||//  \                        //
//                  /  _||||| -:- |||||-  \                       //
//                  |   | \\\  -  /// |   |                       //
//                  | \_|  ''\---/''  |   |                       //
//                  \  .-\__  `-`  ___/-. /                       //
//                ___`. .'  /--.--\  `. . ___                     //
//              .&quot;&quot; '&lt;  `.___\_&lt;|&gt;_/___.'  &gt;'&quot;&quot;.                  //
//            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
//            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
//      ========`-.____`-.___\_____/___.-`____.-'========         //
//                           `=---='                              //
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
//            佛祖保佑       永不宕机     永无BUG                  //
////////////////////////////////////////////////////////////////////
</code></pre>
<p>常用属性设置：</p>
<ul>
<li><code>${AnsiColor.BRIGHT_RED}</code>：设置控制台中输出内容的颜色</li>
<li><code>${application.version}</code>：用来获取 <code>MANIFEST.MF</code> 文件中的版本号</li>
<li><code>${application.formatted-version}</code>：格式化后的 <code>${application.version}</code> 版本信息</li>
<li><code>${spring-boot.version}</code>：Spring Boot 的版本号</li>
<li><code>${spring-boot.formatted-version}</code>：格式化后的 <code>${spring-boot.version}</code> 版本信息</li>
</ul>
<h2 id="配置文件">配置文件</h2>
<p>Spring Boot 项目使用一个全局的配置文件 <code>application.properties</code> 或者是 <code>application.yml</code>，在 <code>resources</code> 目录下或者类路径下的 <code>/config</code> 下，一般我们放到 <code>resources</code> 下。</p>
<p>修改 Tomcat 的端口为 9090，并将默认的访问路径 &quot;/&quot; 修改为 &quot;boot&quot;，可以在 <code>application.properties</code> 中添加：</p>
<pre><code class="language-properties">server.port=9090
server.context-path=/boot
</code></pre>
<p>或在 application.yml 中添加：</p>
<pre><code class="language-yaml">server:
  port: 9090
  context-path: /boot
</code></pre>
<p><a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cHM6Ly9kb2NzLnNwcmluZy5pby9zcHJpbmctYm9vdC9kb2NzLzIuMC4yLlJFTEVBU0UvcmVmZXJlbmNlL2h0bWwvY29tbW9uLWFwcGxpY2F0aW9uLXByb3BlcnRpZXMuaHRtbA==">更多配置</a></p>
<h2 id="starter-pom">Starter POM</h2>
<p>Spring Boot 为我们提供了简化企业级开发绝大多数场景的 starter pom ，只要使用了应用场景所需要的 starter pom ，相关的技术配置将会消除，就可以得到 Spring Boot 为我们提供的自动配置的 Bean。</p>
<p><a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cHM6Ly9kb2NzLnNwcmluZy5pby9zcHJpbmctYm9vdC9kb2NzLzIuMC4yLlJFTEVBU0UvcmVmZXJlbmNlL2h0bWwvdXNpbmctYm9vdC1idWlsZC1zeXN0ZW1zLmh0bWwjdXNpbmctYm9vdC1zdGFydGVy">更多 Starter POM</a></p>
<h2 id="日志配置">日志配置</h2>
<p>Spring Boot 对各种日志框架都做了支持，我们可以通过配置来修改默认的日志的配置</p>
<p>默认情况下，Spring Boot 使用 Logback 作为日志框架</p>
<pre><code class="language-yaml">logging:
  file: ../logs/spring-boot-hello.log
  level.org.springframework.web: DEBUG
</code></pre>
<h2 id="关闭特定的自动配置">关闭特定的自动配置</h2>
<p>关闭特定的自动配置使用 <code>@SpringBootApplication</code> 注解的 <code>exclude</code> 参数即可，这里以关闭数据源的自动配置为例</p>
<pre><code class="language-java">@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})
</code></pre>
<p>https://www.zhihu.com/question/28594409/answer/74003996)</p>
<h2 id="读取配置文件">读取配置文件</h2>
<ol>
<li>@Value</li>
<li>Environment</li>
<li>@ConfigurationProperties</li>
</ol>
<h2 id="多环境配置">多环境配置</h2>
<p>我们在开发Spring Boot应用时，通常同一套程序会被安装到不同环境，比如：开发、测试、生产等。其中数据库地址、服务器端口等等配置都不同，如果每次打包时，都要修改配置文件，那么非常麻烦。profile功能就是来进行动态配置切换的。</p>
<ol>
<li>profile配置方式</li>
</ol>
<ul>
<li>多profile文件方式</li>
<li>yml多文档方式</li>
</ul>
<pre><code class="language-tex">多profile文件方式：提供多个配置文件，每个代表一种环境:
    application-dev.properties/yml 开发环境
    application-test.properties/yml 测试环境
    application-pro.properties/yml 生产环境
yml多文档方式：
    在yml中使用  --- 分隔不同配置
</code></pre>
<ol start="2">
<li>profile激活方式</li>
</ol>
<ul>
<li>配置文件</li>
<li>虚拟机参数</li>
<li>命令行参数</li>
</ul>
<pre><code class="language-tex">配置文件： 再配置文件中配置：spring.profiles.active=dev
虚拟机参数：在VM options 指定：-Dspring.profiles.active=dev
命令行参数：java –jar xxx.jar  --spring.profiles.active=dev
</code></pre>
<h2 id="spring-boot-内部配置加载顺序">spring boot 内部配置加载顺序</h2>
<p>Springboot程序启动时，会从以下位置加载配置文件：</p>
<ol>
<li>file:./config/：当前项目下的/config目录下</li>
<li>file:./           ：当前项目的根目录</li>
<li>classpath:/config/：classpath的/config目录</li>
<li>classpath:/  ：classpath的根目录</li>
</ol>
<h1 id="spring-boot-高级">spring boot 高级</h1>
<h2 id="spring-boot-自动配置">spring boot 自动配置</h2>
<h3 id="1问题">1问题</h3>
<p>SpringBoot是如何知道要创建哪个Bean的？比如SpringBoot是如何知道要创建RedisTemplate的？</p>
<h4 id="11-获取redistemplate">1.1 获取RedisTemplate</h4>
<h5 id="111-创建一个干净的springboot项目并修改启动类">1.1.1 创建一个干净的springboot项目并修改启动类</h5>
<pre><code class="language-java">@SpringBootApplication
public class SpringbootStudyApplication {

    public static void main(String[] args) {
        //启动SpringBoot的应用，返回Spring的IOC容器
        ConfigurableApplicationContext context = SpringApplication.run(SpringbootStudyApplication.class, args);
        //获取Bean，redisTemplate
        Object redisTemplate = context.getBean(&quot;redisTemplate&quot;);
        System.out.println(redisTemplate);
    }

}
</code></pre>
<h5 id="112-启动项目">1.1.2 启动项目</h5>
<ul>
<li>报错找不到redisTemplate bean</li>
</ul>
<pre><code class="language-shell">Exception in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'redisTemplate' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:816)
	...
</code></pre>
<h5 id="113-添加依赖">1.1.3  添加依赖</h5>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h5 id="114-再启动项目">1.1.4 再启动项目</h5>
<ul>
<li>启动不报错 输出redisTemplate 对象信息</li>
</ul>
<pre><code class="language-shell">org.springframework.data.redis.core.RedisTemplate@287f94b1
</code></pre>
<h4 id="12-思考">1.2 思考</h4>
<p>为什么添加了redis的依赖后,就能获取到redisTemplate bean了?</p>
<h3 id="2-做一个condition小练习">2 做一个Condition小练习</h3>
<h4 id="21-需求">2.1 需求</h4>
<p>在 Spring 的 IOC 容器中有一个 User 的 Bean，现要求：</p>
<ol>
<li>导入Jedis坐标后，加载该Bean，没导入，则不加载。</li>
<li>将类的判断定义为动态的。判断哪个字节码文件存在可以动态指定。</li>
</ol>
<h4 id="22-conditional">2.2 @Conditional</h4>
<h5 id="231-查看conditional源码">2.3.1 查看<code>@Conditional</code>源码</h5>
<pre><code class="language-java">@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Conditional {
    Class&lt;? extends Condition&gt;[] value();
}
</code></pre>
<ul>
<li>Conditional 注解参数为 Condition 的子类的Class对象</li>
</ul>
<h5 id="232-继续查看condition">2.3.2  继续查看Condition</h5>
<pre><code class="language-java">@FunctionalInterface
public interface Condition {
    boolean matches(ConditionContext var1, AnnotatedTypeMetadata var2);
}
</code></pre>
<ul>
<li>Condition 为接口,其中方法matches</li>
<li>matches 作用: 当实现类的 matches 方法返回true时,则注册标识的类或方法,false反之</li>
</ul>
<h4 id="22-创建pojo">2.2 创建pojo</h4>
<pre><code class="language-java">public class User {
}
</code></pre>
<h4 id="23-创建配置类">2.3 创建配置类</h4>
<pre><code class="language-java">@Configuration
public class UserConfig {
    @Bean
    @Conditional(ClassCondition.class)
    public User user(){
        return new User();
    }
}
</code></pre>
<h4 id="24-条件实现类">2.4 条件实现类</h4>
<pre><code class="language-java">public class ClassCondition implements Condition {
   /**
    * @param context  上下文对象。用于获取环境，IOC容器，ClassLoader对象
    * @param metadata 注解元对象。 可以用于获取注解定义的属性值
    * @return
   */
   @Override
   public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata){
        return true;
    }
}
</code></pre>
<ul>
<li>直接返回true,测试能不能直接获取到user bean</li>
</ul>
<h4 id="25-修改启动类">2.5 修改启动类</h4>
<pre><code class="language-java">@SpringBootApplication
public class SpringbootStudyApplication {

    public static void main(String[] args) {
        //启动SpringBoot的应用，返回Spring的IOC容器
        ConfigurableApplicationContext context = SpringApplication.run(SpringbootStudyApplication.class, args);
        //获取Bean，redisTemplate
//        Object redisTemplate = context.getBean(&quot;redisTemplate&quot;);

        Object user = context.getBean(&quot;user&quot;);
        System.out.println(user);
    }

}
</code></pre>
<ul>
<li>启动运行之后,可以直接获取到user bean.</li>
<li>验证猜想后,继续完善需求</li>
</ul>
<h4 id="26-引入jedis依赖">2.6 引入jedis依赖</h4>
<pre><code class="language-xml">&lt;dependency&gt;
   &lt;groupId&gt;redis.clients&lt;/groupId&gt;
   &lt;artifactId&gt;jedis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="27-完善条件类逻辑">2.7 完善条件类逻辑</h4>
<pre><code class="language-java">public class ClassCondition implements Condition {
   /**
    *
    * @param context 上下文对象。用于获取环境，IOC容器，ClassLoader对象
    * @param metadata 注解元对象。 可以用于获取注解定义的属性值
    * @return
   */
   @Override
   public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata){
        //1.需求： 导入Jedis坐标后创建Bean
        //思路：判断redis.clients.jedis.Jedis.class文件是否存在
        boolean flag = true;
        try {
            Class&lt;?&gt; cls = Class.forName(&quot;redis.clients.jedis.Jedis&quot;);
        } catch (ClassNotFoundException e) {
            flag = false;
        }
        return flag;
    }
}
</code></pre>
<h4 id="28-再次启动项目">2.8 再次启动项目</h4>
<pre><code class="language-shell">com.ludangxin.springbootstudy.domain.User@7dac3fd8
</code></pre>
<ul>
<li>正常获取user bean</li>
<li>到这里需求一完成</li>
</ul>
<h4 id="29-动态的判断依赖坐标创建注解">2.9 动态的判断依赖坐标创建注解</h4>
<pre><code class="language-java">@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Conditional(ClassCondition.class)
public @interface ConditionOnClass {
    String[] value();
}
</code></pre>
<h4 id="210-修改user-bean">2.10 修改user bean</h4>
<pre><code class="language-java">    @Bean
//    @Conditional(ClassCondition.class)
    @ConditionOnClass(&quot;redis.clients.jedis.Jedis&quot;)
    public User user(){
        return new User();
    }
</code></pre>
<h4 id="修改条件实现">修改条件实现</h4>
<pre><code class="language-java">public class ClassCondition implements Condition {
    /**
     *
     * @param context 上下文对象。用于获取环境，IOC容器，ClassLoader对象
     * @param metadata 注解元对象。 可以用于获取注解定义的属性值
     * @return
     */
    @Override
    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
        /*
        //1.需求： 导入Jedis坐标后创建Bean
        //思路：判断redis.clients.jedis.Jedis.class文件是否存在
        boolean flag = true;
        try {
            Class&lt;?&gt; cls = Class.forName(&quot;redis.clients.jedis.Jedis&quot;);
        } catch (ClassNotFoundException e) {
            flag = false;
        }
        return flag;
        */

        //2.需求： 导入通过注解属性值value指定坐标后创建Bean

        //获取注解属性值  value
        Map&lt;String, Object&gt; map = metadata.getAnnotationAttributes(ConditionOnClass.class.getName());
        //System.out.println(map);
        String[] value = (String[]) map.get(&quot;value&quot;);

        boolean flag = true;
        try {
            for (String className : value) {
                Class&lt;?&gt; cls = Class.forName(className);
            }
        } catch (ClassNotFoundException e) {
            flag = false;
        }
        return flag;

    }
}
</code></pre>
<h4 id="启动项目">启动项目</h4>
<pre><code class="language-shell">com.ludangxin.springbootstudy.domain.User@62573c86
</code></pre>
<ul>
<li>正常获取user bean</li>
<li>到这里需求完成</li>
<li>练习做完后大概明白了condition注解的作用</li>
</ul>
<h3 id="3-condition">3  Condition</h3>
<p>Condition 是在Spring 4.0 增加的条件判断功能，通过这个可以功能可以实现选择性的创建 Bean 操作.</p>
<h4 id="springboot-提供的常用条件注解">SpringBoot 提供的常用条件注解：</h4>
<p>Spring提供的一些成品的(不需要自行扩展的)条件注解<br>
<code>@ConditionOnClass</code> 判断环境中是否有对应字节码文件才初始化Bean<br>
<code>@ConditionOnBean</code> 判断环境中是否有对应bean才初始化Bean<br>
<code>@ConditionOnWebApplication</code> 当前项目是Web项目的条件<br>
<code>@ConditionOnExpression</code> 基于SpEL表达式作为判断条件<br>
<code>@ConditionOnJndi</code> 在JNDI存在时查找指定的位置<br>
<code>@ConditionMissingBean</code> 当SpringIoc容器内不存在指定的Bean的条件<br>
<code>@ConditionMissingClass</code> 当SpringIoc容器内不存在指定的Class的条件<br>
<code>@ConditionOnNotWebApplication</code> 当前项目不是Web项目的条件<br>
<code>@ConditionOnProperty</code> 指定的属性是否有指定的值<br>
<code>@ConditionOnResource</code> 类路径是否有指定的值<br>
<code>@ConditionOnSingleCandidate</code> 当指定Bean在IOC容器内只有一个，或者虽然有多个但时指定首选的Bean</p>
<h3 id="4-做一个enable小练习">4 做一个Enable小练习</h3>
<p>SpringBoot中提供了很多Enable开头的注解，这些注解都是用于动态启用某些功能的。而其底层原理是使用@Import注解导入一些配置类，实现Bean的动态加载。</p>
<h4 id="41-思考">4.1 思考</h4>
<p>SpringBoot 工程是否可以直接获取jar包中定义的Bean？</p>
<h4 id="42-验证">4.2 验证</h4>
<h5 id="421-新建一个model">4.2.1 新建一个model</h5>
<p>创建模块</p>
<pre><code class="language-xml">&lt;groupId&gt;com.ludangxin&lt;/groupId&gt;
&lt;artifactId&gt;springboot-study-other&lt;/artifactId&gt;
&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
</code></pre>
<h5 id="422-新建pojo">4.2.2 新建pojo</h5>
<pre><code class="language-java">public class User {
}
</code></pre>
<h5 id="423-新建config类">4.2.3 新建config类</h5>
<pre><code class="language-java">@Configuration
public class UserConfig {
    @Bean
    public User user() {
        return new User();
    }
}
</code></pre>
<h5 id="424-springbootstudy-模块引用刚创建的other模块">4.2.4 springbootstudy 模块引用刚创建的other模块</h5>
<pre><code class="language-xml">&lt;dependency&gt;
   &lt;groupId&gt;com.ludangxin&lt;/groupId&gt;
   &lt;artifactId&gt;springboot-study-other&lt;/artifactId&gt;
   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h5 id="425-注释掉study模块中的config配置类">4.2.5 注释掉study模块中的config配置类</h5>
<pre><code class="language-java">//@Configuration
public class UserConfig {
    @Bean
//    @Conditional(ClassCondition.class)
    @ConditionOnClass(&quot;redis.clients.jedis.Jedis&quot;)
    public User user() {
        return new User();
    }
}
</code></pre>
<h5 id="426-验证-是否能获取到other模块中的user-bean">4.2.6 验证 是否能获取到other模块中的user bean</h5>
<pre><code class="language-shell">Exception in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'user' available
</code></pre>
<ul>
<li>启动项目后发现无法获取到user bean</li>
</ul>
<h5 id="427-为什么获取不到呢">4.2.7 为什么获取不到呢?</h5>
<ul>
<li>因为spring boot 默认只扫描当前项目的启动引导类的同级或者同级以下的类,也就是只会注册当前启动类所在包下的springbean</li>
<li>因为新模块的报名和study模块的报名不同导致扫描不到bean ,所以无法自动注入无法直接使用引用包中的bean</li>
</ul>
<h5 id="428-那是不是只要让扫描上配置类就可以了呢">4.2.8 那是不是只要让扫描上配置类就可以了呢?</h5>
<h6 id="4281-componentscan">4.2.8.1 @ComponentScan</h6>
<p>ComponentScan  扫描指定包</p>
<pre><code class="language-java">@SpringBootApplication
@ComponentScan({&quot;com.ludangxin.springbootstudyother.config&quot;})
public class SpringbootStudyApplication {
    public static void main(String[] args) {
        //启动SpringBoot的应用，返回Spring的IOC容器
        ConfigurableApplicationContext context = SpringApplication.run(SpringbootStudyApplication.class, args);
        //获取Bean，redisTemplate
//        Object redisTemplate = context.getBean(&quot;redisTemplate&quot;);

        Object user = context.getBean(&quot;user&quot;);
        System.out.println(user);
    }
}
</code></pre>
<p>启动项目</p>
<pre><code class="language-shell">com.ludangxin.springbootstudyother.domain.User@602c4656
</code></pre>
<ul>
<li>可以获取,验证猜想</li>
</ul>
<h6 id="4282-import">4.2.8.2 @Import</h6>
<p>Import  指定想要导入的配置类,这些类会被spring创建,并放入ioc容器</p>
<pre><code class="language-java">@SpringBootApplication
//@ComponentScan({&quot;com.ludangxin.springbootstudyother.config&quot;})
@Import(com.ludangxin.springbootstudyother.config.UserConfig.class)
public class SpringbootStudyApplication {
    public static void main(String[] args) {
        //启动SpringBoot的应用，返回Spring的IOC容器
        ConfigurableApplicationContext context = SpringApplication.run(SpringbootStudyApplication.class, args);
        //获取Bean，redisTemplate
//        Object redisTemplate = context.getBean(&quot;redisTemplate&quot;);
        Object user = context.getBean(&quot;user&quot;);
        System.out.println(user);
    }
}
</code></pre>
<p>启动项目</p>
<pre><code class="language-shell">com.ludangxin.springbootstudyother.domain.User@712cfb63
</code></pre>
<ul>
<li>可以获取,验证猜想</li>
</ul>
<h5 id="429-改造import">4.2.9  改造import</h5>
<ol>
<li>在springboot-study-other 模块中添加配置 用于激活UserConfig 配置类</li>
</ol>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Import(UserConfig.class)
public @interface EnableUser {
}
</code></pre>
<ol start="2">
<li>
<p>在springboot-study 启动类上添加该配置</p>
<pre><code class="language-java">@SpringBootApplication
//@ComponentScan({&quot;com.ludangxin.springbootstudyother.config&quot;})
//@Import(com.ludangxin.springbootstudyother.config.UserConfig.class)
@EnableUser
public class SpringbootStudyApplication {
    public static void main(String[] args) {
        //启动SpringBoot的应用，返回Spring的IOC容器
        ConfigurableApplicationContext context = SpringApplication.run(SpringbootStudyApplication.class, args);
        //获取Bean，redisTemplate
//        Object redisTemplate = context.getBean(&quot;redisTemplate&quot;);

        Object user = context.getBean(&quot;user&quot;);
        System.out.println(user);
    }
}
</code></pre>
</li>
<li>
<p>启动项目</p>
</li>
</ol>
<pre><code class="language-shell">com.ludangxin.springbootstudyother.domain.User@ca66933
</code></pre>
<ul>
<li>改造后 比前两种方法更好用,不错</li>
</ul>
<h3 id="5-import">5 Import</h3>
<p>@Enable*底层依赖于@Import注解导入一些类，使用@Import导入的类会被Spring加载到IOC容器中。而@Import提供4中用法：</p>
<ol>
<li>导入Bean</li>
<li>导入配置类</li>
<li>导入 ImportSelector 实现类。一般用于加载配置文件中的类</li>
<li>导入 ImportBeanDefinitionRegistrar 实现类。</li>
</ol>
<h3 id="6-enableautoconfiguration">6 EnableAutoConfiguration</h3>
<h4 id="61-源码追踪">6.1 源码追踪</h4>
<ol>
<li>
<p>查看@SpringBootApplication源码</p>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {...}
</code></pre>
</li>
<li>
<p>查看@EnableAutoConfiguration源码</p>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {...}
</code></pre>
</li>
<li>
<p>查看AutoConfigurationImportSelector 类</p>
<pre><code class="language-java">public class AutoConfigurationImportSelector implements DeferredImportSelector, BeanClassLoaderAware,
		ResourceLoaderAware, BeanFactoryAware, EnvironmentAware, Ordered {
	...
    /**
     * 核心代码(实现了DeferredImportSelector接口,重写selectImports方法)
    */
	@Override
	public String[] selectImports(AnnotationMetadata annotationMetadata) {
		if (!isEnabled(annotationMetadata)) {
			return NO_IMPORTS;
		}
		AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(annotationMetadata);
		return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());
	}
</code></pre>
</li>
<li>
<p>查看getAutoConfigurationEntry方法</p>
<pre><code class="language-java">protected AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {
		if (!isEnabled(annotationMetadata)) {
			return EMPTY_ENTRY;
		}
		AnnotationAttributes attributes = getAttributes(annotationMetadata);
		List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);
		configurations = removeDuplicates(configurations);
		Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);
		checkExcludedClasses(configurations, exclusions);
		configurations.removeAll(exclusions);
		configurations = getConfigurationClassFilter().filter(configurations);
		fireAutoConfigurationImportEvents(configurations, exclusions);
		return new AutoConfigurationEntry(configurations, exclusions);
	}
</code></pre>
</li>
<li>
<p>继续查看getCandidateConfigurations方法</p>
<pre><code class="language-java">protected List&lt;String&gt; getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
		List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),
				getBeanClassLoader());
		Assert.notEmpty(configurations, &quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;
				+ &quot;are using a custom packaging, make sure that file is correct.&quot;);
		return configurations;
	}
</code></pre>
<ul>
<li>从该方法断言可以得知,默认读取的是META-INF/spring.factories 下的配置</li>
</ul>
</li>
<li>
<p>查看spring.factories文件(这里只列举了一部分)</p>
<pre><code class="language-properties"># Initializers
org.springframework.context.ApplicationContextInitializer=\
org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer,\
org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener

# Application Listeners
org.springframework.context.ApplicationListener=\
org.springframework.boot.autoconfigure.BackgroundPreinitializer

# Auto Configuration Import Listeners
org.springframework.boot.autoconfigure.AutoConfigurationImportListener=\
org.springframework.boot.autoconfigure.condition.ConditionEvaluationReportAutoConfigurationImportListener

# Auto Configuration Import Filters
org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=\
org.springframework.boot.autoconfigure.condition.OnBeanCondition,\
org.springframework.boot.autoconfigure.condition.OnClassCondition,\
org.springframework.boot.autoconfigure.condition.OnWebApplicationCondition...
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration...
</code></pre>
</li>
<li>
<p>查看最后一行的RedisAutoConfiguration文件信息</p>
<pre><code class="language-java">@Configuration(proxyBeanMethods = false)
@ConditionalOnClass(RedisOperations.class)
@EnableConfigurationProperties(RedisProperties.class)
@Import({ LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class })
public class RedisAutoConfiguration {

	@Bean
	@ConditionalOnMissingBean(name = &quot;redisTemplate&quot;)
	public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)
			throws UnknownHostException {
		RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;();
		template.setConnectionFactory(redisConnectionFactory);
		return template;
	}
	
	@Bean
	@ConditionalOnMissingBean
	public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory)
			throws UnknownHostException {
		StringRedisTemplate template = new StringRedisTemplate();
		template.setConnectionFactory(redisConnectionFactory);
		return template;
	}

}
</code></pre>
</li>
</ol>
<h4 id="62-真相了">6.2 真相了</h4>
<ul>
<li>原来springboot 是同过import的第三种方式(导入 ImportSelector 实现类。一般用于加载配置文件中的类),通过实现<code>ImportSelector</code> 的<code>selectImports</code>方法来默认读取<code>spring.factories</code>中的配置类信息,然后再通过<code>spring.factories</code>中的配置信息,默认去加载一些配置类,然后再通过配置类中的条件注解去加载一些默认配置.</li>
<li>大功告成</li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li><a href="#spring-boot-%E7%AE%80%E4%BB%8B">spring boot 简介</a>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述</a></li>
<li><a href="#spring-%E7%AE%80%E5%8F%B2">Spring 简史</a>
<ul>
<li><a href="#spring-1x-%E6%97%B6%E4%BB%A3">Spring 1.x 时代</a></li>
<li><a href="#spring-2x-%E6%97%B6%E4%BB%A3">Spring 2.x 时代</a></li>
<li><a href="#spring-3x-%E6%97%B6%E4%BB%A3">Spring 3.x 时代</a></li>
<li><a href="#spring-5x-%E6%97%B6%E4%BB%A3">Spring 5.x 时代</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E4%BC%98%E7%BC%BA%E7%82%B9">Spring Boot 优缺点</a>
<ul>
<li><a href="#%E4%BC%98%E7%82%B9">优点</a></li>
<li><a href="#%E7%BC%BA%E7%82%B9">缺点</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#spring-boot-%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE">spring boot 常用配置</a>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0-2">概述</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-banner">自定义 Banner</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a></li>
<li><a href="#starter-pom">Starter POM</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE">日志配置</a></li>
<li><a href="#%E5%85%B3%E9%97%AD%E7%89%B9%E5%AE%9A%E7%9A%84%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE">关闭特定的自动配置</a></li>
<li><a href="#%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">读取配置文件</a></li>
<li><a href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">多环境配置</a></li>
<li><a href="#spring-boot-%E5%86%85%E9%83%A8%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F">spring boot 内部配置加载顺序</a></li>
</ul>
</li>
<li><a href="#spring-boot-%E9%AB%98%E7%BA%A7">spring boot 高级</a>
<ul>
<li><a href="#spring-boot-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE">spring boot 自动配置</a>
<ul>
<li><a href="#1%E9%97%AE%E9%A2%98">1问题</a>
<ul>
<li><a href="#11-%E8%8E%B7%E5%8F%96redistemplate">1.1 获取RedisTemplate</a>
<ul>
<li><a href="#111-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B9%B2%E5%87%80%E7%9A%84springboot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E7%B1%BB">1.1.1 创建一个干净的springboot项目并修改启动类</a></li>
<li><a href="#112-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">1.1.2 启动项目</a></li>
<li><a href="#113-%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96">1.1.3  添加依赖</a></li>
<li><a href="#114-%E5%86%8D%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">1.1.4 再启动项目</a></li>
</ul>
</li>
<li><a href="#12-%E6%80%9D%E8%80%83">1.2 思考</a></li>
</ul>
</li>
<li><a href="#2-%E5%81%9A%E4%B8%80%E4%B8%AAcondition%E5%B0%8F%E7%BB%83%E4%B9%A0">2 做一个Condition小练习</a>
<ul>
<li><a href="#21-%E9%9C%80%E6%B1%82">2.1 需求</a></li>
<li><a href="#22-conditional">2.2 @Conditional</a>
<ul>
<li><a href="#231-%E6%9F%A5%E7%9C%8Bconditional%E6%BA%90%E7%A0%81">2.3.1 查看<code>@Conditional</code>源码</a></li>
<li><a href="#232-%E7%BB%A7%E7%BB%AD%E6%9F%A5%E7%9C%8Bcondition">2.3.2  继续查看Condition</a></li>
</ul>
</li>
<li><a href="#22-%E5%88%9B%E5%BB%BApojo">2.2 创建pojo</a></li>
<li><a href="#23-%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E7%B1%BB">2.3 创建配置类</a></li>
<li><a href="#24-%E6%9D%A1%E4%BB%B6%E5%AE%9E%E7%8E%B0%E7%B1%BB">2.4 条件实现类</a></li>
<li><a href="#25-%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E7%B1%BB">2.5 修改启动类</a></li>
<li><a href="#26-%E5%BC%95%E5%85%A5jedis%E4%BE%9D%E8%B5%96">2.6 引入jedis依赖</a></li>
<li><a href="#27-%E5%AE%8C%E5%96%84%E6%9D%A1%E4%BB%B6%E7%B1%BB%E9%80%BB%E8%BE%91">2.7 完善条件类逻辑</a></li>
<li><a href="#28-%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">2.8 再次启动项目</a></li>
<li><a href="#29-%E5%8A%A8%E6%80%81%E7%9A%84%E5%88%A4%E6%96%AD%E4%BE%9D%E8%B5%96%E5%9D%90%E6%A0%87%E5%88%9B%E5%BB%BA%E6%B3%A8%E8%A7%A3">2.9 动态的判断依赖坐标创建注解</a></li>
<li><a href="#210-%E4%BF%AE%E6%94%B9user-bean">2.10 修改user bean</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E6%9D%A1%E4%BB%B6%E5%AE%9E%E7%8E%B0">修改条件实现</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">启动项目</a></li>
</ul>
</li>
<li><a href="#3-condition">3  Condition</a>
<ul>
<li><a href="#springboot-%E6%8F%90%E4%BE%9B%E7%9A%84%E5%B8%B8%E7%94%A8%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3">SpringBoot 提供的常用条件注解：</a></li>
</ul>
</li>
<li><a href="#4-%E5%81%9A%E4%B8%80%E4%B8%AAenable%E5%B0%8F%E7%BB%83%E4%B9%A0">4 做一个Enable小练习</a>
<ul>
<li><a href="#41-%E6%80%9D%E8%80%83">4.1 思考</a></li>
<li><a href="#42-%E9%AA%8C%E8%AF%81">4.2 验证</a>
<ul>
<li><a href="#421-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAmodel">4.2.1 新建一个model</a></li>
<li><a href="#422-%E6%96%B0%E5%BB%BApojo">4.2.2 新建pojo</a></li>
<li><a href="#423-%E6%96%B0%E5%BB%BAconfig%E7%B1%BB">4.2.3 新建config类</a></li>
<li><a href="#424-springbootstudy-%E6%A8%A1%E5%9D%97%E5%BC%95%E7%94%A8%E5%88%9A%E5%88%9B%E5%BB%BA%E7%9A%84other%E6%A8%A1%E5%9D%97">4.2.4 springbootstudy 模块引用刚创建的other模块</a></li>
<li><a href="#425-%E6%B3%A8%E9%87%8A%E6%8E%89study%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84config%E9%85%8D%E7%BD%AE%E7%B1%BB">4.2.5 注释掉study模块中的config配置类</a></li>
<li><a href="#426-%E9%AA%8C%E8%AF%81-%E6%98%AF%E5%90%A6%E8%83%BD%E8%8E%B7%E5%8F%96%E5%88%B0other%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84user-bean">4.2.6 验证 是否能获取到other模块中的user bean</a></li>
<li><a href="#427-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E5%91%A2">4.2.7 为什么获取不到呢?</a></li>
<li><a href="#428-%E9%82%A3%E6%98%AF%E4%B8%8D%E6%98%AF%E5%8F%AA%E8%A6%81%E8%AE%A9%E6%89%AB%E6%8F%8F%E4%B8%8A%E9%85%8D%E7%BD%AE%E7%B1%BB%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%E5%91%A2">4.2.8 那是不是只要让扫描上配置类就可以了呢?</a>
<ul>
<li><a href="#4281-componentscan">4.2.8.1 @ComponentScan</a></li>
<li><a href="#4282-import">4.2.8.2 @Import</a></li>
</ul>
</li>
<li><a href="#429-%E6%94%B9%E9%80%A0import">4.2.9  改造import</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-import">5 Import</a></li>
<li><a href="#6-enableautoconfiguration">6 EnableAutoConfiguration</a>
<ul>
<li><a href="#61-%E6%BA%90%E7%A0%81%E8%BF%BD%E8%B8%AA">6.1 源码追踪</a></li>
<li><a href="#62-%E7%9C%9F%E7%9B%B8%E4%BA%86">6.2 真相了</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                            </div>
                            
                                
                                    
                                        <!--en-->
                                        <section class="post-copyright en">
                                            <p class="copyright-item">
                                                <span>Author:</span>
                                                <span>断剑重铸之日，骑士归来之时。</span>
                                            </p>

                                            <p class="copyright-item">
                                                <span>Permalink:</span>
                                                <span><a href="http://blog.ludangxin.club/post/springboot/">http://blog.ludangxin.club/post/springboot/</a></span>
                                            </p>

                                            <p class="copyright-item">
                                                <span>License:</span>
                                                <span>MIT License</span>
                                            </p>
                                        </section>
                                        
                                                
                                                    
                                                        <!-- Share-->
                                                        <span style="margin-right:15px">
                                                    <i class="post-share"></i>
                                                    <span>Share:</span>
                                                        <a title="QR Code" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://blog.ludangxin.club/post/springboot/"><i class="fa fa-qrcode"></i></a>
                                                        <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://blog.ludangxin.club/post/springboot/&sharesource=qzone&title=SpringBoot&pics=http://blog.ludangxin.club/images/avatar.png?v=1598170753026&summary="><i class="fa fa-qq"></i></a>
                                                        <a title="Weibo" target="_blank" href="https://service.weibo.com/share/share.php?url=http://blog.ludangxin.club/post/springboot/&sharesource=weibo&title=SpringBoot + " - " + &pic="http://blog.ludangxin.club/images/avatar.png?v=1598170753026 "><i class="fa fa-weibo "></i></a>
                                                        
                                                                </span>
                                                                <!--en-->
                                                                <section class="post-tags en ">
                                                                    <div>
                                                                        <span>Tag(s):</span>
                                                                        <span class="tag ">
                        
                        
                        <a href="http://blog.ludangxin.club/tag/LSBz4Ej4I/">#
                                                springboot
                                                    </a>
                                                    
                                                        
                                                            </span>
                                                                    </div>
                                                                    <div>
                                                                        <a href="javascript:window.history.back();">back</a>
                                                                        <span>&dot;</span>
                                                                        <a href="#">home</a>
                                                                    </div>
                                                                </section>
                                                                
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                            
                                                                                                <a class="next" rel="next" href="http://blog.ludangxin.club/post/mybatis-plus/">
                                                                                                    SpringBoot 集成 Mybatis-Plus
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                                            
                                                <script type="application/javascript" src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
<div id="vlaine-comment"></div>
<script type="application/javascript">
    new Valine({
        el: '#vlaine-comment',
        appId: '6v8KE1xPEnnI3VycbaTHPQvD-gzGzoHsz',
        appKey: 'tCAPkuAx3JWn7YrPKlEpyaMH',
        pageSize: 10,
        avatar: 'mp',
        placeholder: '来都来了，不妨评论一下',
        visitor: true,
        highlight: false,
        recordIP: true,
    })
</script>
                                                    
            </div>
    </div>
    </div>
    </div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                    <div class="Like">
                        <div class="tip" data-tooltip="Do you like it?">
                            <a href="https://github.com/ITJoker233/Gridea-theme-Chic" target="_blank" title=""><svg class="icon"
                        aria-hidden="true">
                        <use xlink:href="#like"></use>
                    </svg><b class="like_text" id="star"></b></a>
                        </div>
                    </div>
                    
                        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
                            
                                <b id="hitokoto"></b><br>
                                
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        断剑重铸之日，骑士归来之时。 &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://coding.net" target="_blank">
                                                Coding.net
                                            </a>
            </div>
            <div id="update" style="display:none;">
                on
            </div>
            
                <div id="version" style="display:none;">
                    1.7.4
                </div>
                
                    <script>
                        var port = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + port + '</div>')
                    </script>
        </footer>
        
            <script src='https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js'></script>
            
                <script>
                    
                    
                    loadlive2d();
                    
                    
                    hitokoto();
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    CheckVersion();
                    
                    var newDate = new Date();
                    newDate.setTime(1598170753026);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
        </div>
</body>
<script>
    scroll();
</script>

</html>